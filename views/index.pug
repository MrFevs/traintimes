<!DOCTYPE html>
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(http-equiv="X-UA-Compatible", content="ie=edge")
        link(href="https://use.fontawesome.com/releases/v5.0.8/css/all.css", rel="stylesheet")
        link(rel="stylesheet", href="/css/site.min.css")
        title= title
    body
        div.uk-grid-collapse(uk-grid)
            aside.uk-width-medium.uk-background-primary.tt-sidebar-border(uk-height-viewport)
                div.uk-height-1-1(uk-sticky)
                    .uk-logo.uk-padding Traintimes
                    ul.uk-nav.uk-nav-primary
                        li.uk-active
                            a.uk-padding-horizontal(href="#")
                                span.uk-margin-right.uk-text-middle(uk-icon="rss")
                                span.uk-text-middle Departures
                        li.uk-nav-divider
                        li
                            a.uk-padding.uk-disabled(href="#")
                                span.uk-margin-right.uk-text-middle(uk-icon="location")
                                span.uk-text-middle Stations

            main.uk-width-expand(uk-height-viewport)
                include partials/header
                div
                    table.uk-table.uk-table-small.uk-table-middle.uk-table-divider
                        thead
                            tr
                                th Due
                                th Status
                                th Expected
                                th Platform
                                th Operator
                                th Service To
                                th
                        tbody
                            each train in departures.departures.all
                                tr
                                    td= train.aimed_departure_time
                                    td= train.status
                                    td= train.expected_departure_time
                                    td= train.platform
                                    td.uk-padding-remove= train.operator
                                    td= train.destination_name
                                    th
                                        a.uk-icon-link(uk-icon="more")
                            if(departures.departures.all.length == 0)
                                include partials/table/no-records
      
        #searchBox(uk-modal)
            .uk-modal-dialog.uk-modal-body.uk-background-primary.uk-border-rounded
                h2.uk-modal-title.uk-light Station Code
                input#search.uk-input.uk-margin-bottom(type="text",placeholder="LAN")
                button#searchSubmit.uk-button.uk-button-secondary.uk-modal-close(type="button") Submit

    script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js")
    script(src="/js/uikit.min.js")
    script(src="/js/uikit-icons.min.js")
    script.

      $("#searchSubmit").click(function(event){
        event.preventDefault();
        code = $("#search").val();
        window.location.href = `/station/${code}`;
      });

      $("#search").keyup(function(event){
        if(event.which === 13){
          code = $("#search").val();
          window.location.href = `/station/${code}`;
        }
      });